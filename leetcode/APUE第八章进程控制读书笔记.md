---
title: APUE第八章进程控制读书笔记
tags: 操作系统,进程,fork
grammar_cjkRuby: true
---
## 总结
第八章主要讲了fork函数，exec系列函数，exit系列函数和wait系列函数的主要用途，这些函数可以对进程进行控制。后面还有一些对system函数，解释器文件，进程时间进程调度的简单介绍。重点内容在于对前面的几个系统调用的理解，还有孤儿进程，僵尸进程的概念。
## 重点笔记
- fork函数调用之后，子进程和父进程共享正文段，其余的数据段，堆和栈被复制。且共享同一个文件偏移量。处理文件的时候要注意。不同的地方主要有进程ID， 文件锁不继承等。
- fork返回0的代表子进程，大于零是子进程ID，即父进程。
- 调用exit系列函数可以终止进程并且返回终止状态。包括异常终止也会返回终止状态，父进程可以用wait系列函数取得终止状态。
- **若父进程早于子进程终止，子进程的父进程变为init进程，孤儿进程被收养。**内核的实现方式是在进程终止时检查其子进程，修改子进程的父进程ID。
- **僵死进程，进程已经终止，但是父进程还没有处理内核保留的信息，即没有善后。**解决方式是对父进程处理，找到源头。
- wait系列函数会导致父进程阻塞，但是不用wait系列会导致僵死进程。解决方法是调用fork两次。终止子进程，那么子进程的子进程的父进程就会变为init，init会妥善处理终止的子进程。
- exec系列不改变进程ID，只是替换程序。
- 很多系统实现中只有execve是系统调用。